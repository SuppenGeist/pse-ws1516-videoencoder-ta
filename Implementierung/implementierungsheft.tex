\documentclass[parskip=full]{scrartcl}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[german]{babel}
\usepackage{hyperref}
\usepackage{mathptmx} 
\usepackage[scaled]{helvet} %
\usepackage{graphicx}
\hypersetup{
pdftitle={Implementierungsheft},
bookmarks=true,
}

\makeatletter
\setlength{\@fptop}{0pt}
\makeatother

\usepackage{csquotes} 

{
\titlehead{\centering\includegraphics[width=10cm]{Logo.png}}
\title{\fontsize{40}{48} \selectfont \textsc{Implementierungsheft}\\
{\fontsize{18}{18} \selectfont Multimediatool zum Testen von Videoencodern}}}
\author {Johannes Werner, Noel Schuhmacher, Sascha Rapp, Simon Grafenhorst,\\
Carina Weber, Jan Benedikt Schwarz}

\begin{document}
\maketitle
\thispagestyle{empty}
\newpage
\tableofcontents
\newpage
\section{EntwurfsÃ¤nderungen}
\subsection{Legende}
\textbf{Aufbau eines Eintrags:}
\begin{verbatim}
{+,-,#} {Sichtbarkeitsbereich} ...
\end{verbatim}
Grund der Aenderung.\\
\\
\textbf{Aenderungszeichen:}
\begin{itemize}
\item[] + \hspace{5mm}-->\hspace{5mm} Hinzugefuegt
\item[] - \hspace{5mm}-->\hspace{5mm} Entfernt
\item[] \# \hspace{5mm}-->\hspace{5mm} Geaendert
\end{itemize}
\textbf{Sichtbarkeitsbereiche:}
\begin{itemize}
\item public
\item public slots
\item signals
\item protected
\item private slots
\item private
\end{itemize}
\newpage
\subsection{Allgemeines}
\begin{itemize}
\item Korrigierte Rechtschreibfehler in den Klassen-/Methodennamen werden nicht dokumentiert. 
\item Allen Attributen wird ein Unterstrich zur bessern Lesbarkeit des Codes angehaengt.
\item Gui-Klassen werden folgende Methoden bei Bedarf hinzugefuegt:
\begin{verbatim}
+ (private) void createUi()
+ (private) void connectActions()
\end{verbatim}
Diese Methoden dienen allein der Lesbarkeit des Codes.

\item Aenderungen an den folgenden Methodenspezifizierern werden nicht dokumentiert:
\begin{verbatim}
const
noexcept
\end{verbatim}

\end{itemize}
\newpage
\subsection{Filterkofigurationsboxen}
\subsubsection{Basisklasse: FilterConfigurationBox}
\begin{verbatim}
+ (public) static std::unique_ptr<FilterConfigurationBox>
CreateConfigurationBox(FilterTab& filterTab, Model::Filter& filter)
\end{verbatim}
Fabrikmethode zur Erstellung einer FilterConfigurationBox fuer einen bestimmten Filter.
\begin{verbatim}
+ (public) void setFilterTab(FilterTab& filterTab)
+ (public) void setFilterIndex(std::size_t index)
+ (private) std::size_t index
+ (private) FilterTab* filterTab
\end{verbatim}
Dass der UndoCommand zum Rueckgaengig machen der Aenderung am Filter korrekt erstellt werden kann.
\begin{verbatim}
+ (public) virtaul void updateUi()
\end{verbatim}
Um der FilterConfigurationBox bescheid sagen zu koennen, dass der Filter sich ausserhalb der Box geaendert hat.
\begin{verbatim}
+ (protected) void updatePreview()
\end{verbatim}
Wird von der erbenden Klasse aufgerufen, um die Vorschau entsprechend den Aenderungen des Benutzers anzupassen.
\begin{verbatim}
+ (protected) void updateTempFilter();
\end{verbatim}
Wird von der erbenden Klasse aufgerufen, um den temporaeren Filter auf den Stand des originalen Filters zu bringen.
\begin{verbatim}
+ (private slots) applyFilter()
+ (private slots) resetFilter()
\end{verbatim}
Slots fuer die entsprechenden Buttons.
\begin{verbatim}
+ (private) static QImage& getDefaultImage()
+ (private) static std::unique_ptr<QImage> defaultImage
\end{verbatim}
Stellt das Standardbild fuer die Vorschau zur Verfuegung.
\begin{verbatim}
+ (protected) std::unique_ptr<Model::Filter> tempFilter
\end{verbatim}
Temporaeres Filterobjekt, auf welched die erbende Klasse die Aenderungen des Benutzers anwendet.
\begin{verbatim}
+ (protected) QScrollArea* filterOptionsArea
+ (private) std::unique_ptr<QImage>
+ (private) FrameView* filterPreview
+ (private) QLabel* label_filter
+ (private) QPushButton* button_apply
+ (private) QPushButton* button_reset
\end{verbatim}
Steuerung der Gui.
\subsubsection{Allgemein erbende Klassen}
\begin{verbatim}
+ (protected) void updateUi()
\end{verbatim}
Zum updaten der Gui. Wird geerebt von der Basisklasse.
\begin{verbatim}
+ (private) void createFilterOptions()
\end{verbatim}
Erstellt die Gui.
\begin{verbatim}
+ (private slots) ...
\end{verbatim}
Slots fuer die Gui-Elemente.
\begin{verbatim}
+ (private) ...
\end{verbatim}
Attribute zur Steuerung der Gui.
\newpage
\subsection{Filter}
\subsubsection{Basisklasse: Filter}
\begin{verbatim}
+ (public) static std::unique_ptr<Filter> CreateFilter(QString filtername)
\end{verbatim}
Fabrikmethode um einen Filter aufgrund dessen Name zu erstellen.
\begin{verbatim}
# (public) virtual std::string getName()=0

std::string => QString
\end{verbatim}
Bessere Kompatibilitaet mit den Qt Gui Elementen.

\begin{verbatim}
+ (public) virtual void restore(QString description)=0
+ (public) virtual QString getSaveString()=0
\end{verbatim}
Zum einfachen kopieren von Filtern, wenn die konkrete Klasse nicht bekannt ist und zum einfachen Laden und Speichern der Filter.

\subsubsection{Allgemein erbende Klassen}
\begin{verbatim}
+ (public) static const QString FILENAME
\end{verbatim}
Um Filternamen nicht 'nackt' in den Quelltext zu schreiben.
\begin{verbatim}
# (public) void std::string getName()
+ (public) void restore(QString description)
+ (public) void QString getSaveString()
\end{verbatim}
Uebernommene Aenderungen aus der Basisklasse.
\subsubsection{BlackWhiteFilter}
\begin{verbatim}
class BlackWhitefilter => class GrayscaleFilter
\end{verbatim}
Korrekte Uebersetzung ins Englische.
\subsubsection{BlendingFilter}
\begin{verbatim}
class BlendingFilter => geloescht
\end{verbatim}
Widerspruch mit der FilterPreview Funktionalitaet.
\subsubsection{BlurFilter}
\begin{verbatim}
- (public) bool getPreserveEdges()
- (public) bool setPreserveEdges()
- (private) bool preserveEdges
\end{verbatim}
Die Option hatte keinen Effekt auf das Ergebnis.

\subsubsection{BorderFilter}
\begin{verbatim}
# (public) void setColor(QRgb color)
# (public) QRgb getColor()
# (private) QRgb color

QRgb => QColor
\end{verbatim}
Komfortablerer Umgang mit QColor.

\subsubsection{GridFilter}
\begin{verbatim}
# (public) void setColor(QRgb color)
# (public) QRgb getColor()
# (private) QRgb color

QRgb => QColor
\end{verbatim}
Komfortablerer Umgang mit QColor.
\subsubsection{RectangleFilter}
\begin{verbatim}
# (public) void setColor(QRgb color)
# (public) QRgb getColor()
# (private) QRgb color

QRgb => QColor
\end{verbatim}
Komfortablerer Umgang mit QColor.
\subsubsection{ZoomFilter}
\begin{verbatim}
class ZoomFilter => geloescht
\end{verbatim}
Bug in libavfilter.

\subsection{AnalysisBoxContainerMemento}
\begin{verbatim}
# (public) std::vector<AnalysisBoxMemento> getAnalysisBoxList()

std::vector<AnalysisBoxMemento> 
=> std::vector<std::unique_ptr<AnalysisBoxMemento>>&

- (private) std::vector<AnalysisBoxMemento*> mementoList

std::vector<AnalysisBoxMemento*>
=>std::vector<std::unique_ptr<AnalysisBoxMemento>>
\end{verbatim}
Unnoetiges kopieren vermeiden.
\begin{verbatim}
- (public) void setAnalysisBoxList(std::vector<AnalysisBoxMemento> analysisBoxList)
+ (public) void addMemento(std::unique_ptr<AnalysisBoxMemento> memento)
\end{verbatim}
Komfortablere Schnittstelle.

\subsection{AnalysisBoxMemento}
\begin{verbatim}
# (public) QString getVideoPath()
# (public) void setVideoPath(QString videoPath)
# (private) QString videoPath

videoPath => \{P,p\}ath

# (public) Model::Video* getMacroVideo()
# (public) void setMacroVideo(Model::Video* macroVideo)
# (private) Model::Video* macroVideo

\{M,m\}acro => \{M,m\}acro\{B,b\}lockVideo

# (public) Model::Graph getPsnr()
# (public) void setPsnr(Model::Graph psnr)
# (private) Model::Graph psnr

\{P,p\}snr => \{P,p\}snrGraph

# (public) Model::Graph getBitrate()
# (public) void setBitrate(Model::Graph Bitrate)
# (private) Model::Graph bitrate

\{B,p=b\}snr => \{B,b\}snrGraph

\end{verbatim}
Sauberere Namensgebung.

\begin{verbatim}
# (public) Model::Graph getPsnr()
# (public) void setPsnr(Model::Graph psnr)
# (private) Model::Graph psnr
# (public) Model::Graph getBitrate()
# (public) void setBitrate(Model::Graph Bitrate)
# (private) Model::Graph bitrate

Model::Graph => Model::Graph*
\end{verbatim}
Unnoetiges kopieren vermeiden.

\begin{verbatim}
+ (public) void setEncoder(QString encoder)
+ (public) QString getEncoder()
+ (public) void setAverageBitrate(QString bitrate)
+ (public) QString getAverageBitrate()
+ (public) void setFilename(QString filename)
+ (public) QString getFilename()
+ (public) void setFilesize(QString size)
+ (public) QString getFilesize()
+ (public) void setRedHistogram(Model::GraphVideo* video)
+ (public) Model::GraphVideo* getRedHistogram()
+ (public) void setGreenHistogram(Model::GraphVideo* video)
+ (public) Model::GraphVideo* getGreenHistogram()
+ (public) void setBlueHistogram(Model::GraphVideo* video)
+ (public) Model::GraphVideo* getBlueHistogram()
+ (private) QString encoder
+ (private) QString avergaeBitrate
+ (private) QString filename
+ (private) QString filesize
+ (private) Model::GraphVideo* redHistogram
+ (private) Model::GraphVideo* greenHistogram
+ (private) Model::GraphVideo* blueHistogram
\end{verbatim}
Vergessene Attribute, die auch gespeichert werden muessen.

\subsection{AnalysisTabMemento}
\begin{verbatim}
# (public) int getCurrentVideoPosition()
# (public) void setCurrentVideoPosition(int currentVideoPosition)
# (private) int currentVideoPosition

\{C,c\}urrentVideo => Player
\end{verbatim}
Sauberere Namensgebung.
\begin{verbatim}
- (public) int getCurrentlyShownAnalysisVideo()
- (public) void setCurrentlyShownAnalysisVideo(int currentVideo)
- (private) int currentlyShownAnalysisVideo
- (public) float getCurrentSpeed()
- (public) void setCurrentSpeed(float currentSpeed)
- (private) currentSpeed
\end{verbatim}
Nicht realisierbar bzw. nicht mehr von noeten.
\begin{verbatim}
# (public) AnalysisBoxContainerMemento getAnalysisBoxContainerMemento()

AnalysisBoxContainerMemento => AnalysisBoxContainerMemento*

# (public) void setAnalysisBoxContainerMemento(AnalysisBoxContainerMemento memento)

AnalysisBoxContainerMemento => std::unique_ptr<AnalysisBoxContainerMemento>

+ (private) std::unique_ptr<AnalysisBoxContainerMemento> analysisboxMemento
\end{verbatim}
Unnoetiges Kopieren vermeiden.
\begin{verbatim}
+ (public) void setRawVideo(Model::YuvVideo* video)
+ (public) void setRawVideo(std::unique_ptr<Model::YuvVideo> video)
+ (public) std::unique_ptr<Model::YuvVideo> releaseVideo()
+ (public) Model::YuvVideo* getRawVideo()
+ (public) GUI::AnalysisGraph getAnalysisGraph()
+ (public) void setAnalysisGraph(GUI::AnalysisGraph graph)
+ (public) GUI::AnalysisVideo getAnalysisVideo()
+ (public) void setAnalysisVideo(GUI::AnalysisVideo video)
+ (private) Model::YuvVideo* rawVideo
+ (private) std::unique_ptr<Model::YuvVideo> ownedVideo
+ (private) GUI::AnalysisGraph graph
+ (private) GUI::AnalysisVideo video
\end{verbatim}
Vergessene Attribute, die auch gespeichert werden muessen.
\subsection{FilterTabMemento}
\begin{verbatim}
# (public) bool getWasApplied()
# (public) void setWasApplied(bool wasApplied)
# (private) bool wasApplied

WasApplied => IsFilteredVideoShown

# (public) int getDisplayedFrame()
# (public) void setDisplayedFrame(int displayedFrame)
# (private) int displayedFrame

DisplayedFrame => CurrentFrame

\end{verbatim}
Sauberere Namensgebung.
\begin{verbatim}
# (public) Model::FilterList getFilterList()
# (public) void setFilterList(Model::FilterList list)
# (private) Model::FilterList  filterList

Model::FilterList => std::unique_ptr<Model::FilterList>
\end{verbatim}
Abstrakte Klassen lassen sich nicht kopieren.
\begin{verbatim}
- (public) std::string getLoadedFile()
- (public) void setLoadedFile(std::string loadedFile)
- (private) std::string loadedFile
\end{verbatim}
Wurden ersetzt durch bessere Methoden.
\begin{verbatim}
+ (public) void setRawVideo(Model::YuvVideo* rawVideo)
+ (public) void setRawVideo(std::unique_ptr<Model::YuvVideo> video)
+ (public) std::unique_ptr<Model::YuvVideo> releaseVideo()
+ (public) Model::YuvVideo* getRawVideo()
+ (public) void setIsPreviewShown(bool isShown)
+ (public) bool isPreviewShow()
+ (public) void setCurrentFrame(int currentFrame)
+ (public) int getCurrentFrame()
+ (public) void setCurrentlySelectedFilter(int filter)
+ (public) int getCurrentlySelectedFilter()
+ (private) Model::YuvVideo* rawVideo
+ (private) std::unique_ptr<Model::YuvVideo> ownedRawVideo
+ (private) bool isPreviewShown
+ (private) int currentFrame
+ (private) int currentlySelectedFilter
\end{verbatim}
Vergessene Attribute, die auch gespeichert werden muessen.
\subsection{MainWindowMemento}
\begin{verbatim}
# (public) AnalysisTabMemento getAnalysisTabMemento()
# (public) FilterTabMemento getFilterTabMemento()

AnalysisTabMemento => AnalysisTabMemento*
FilterTabMemento => FilterTabMemento*

# (public) void setAnalysisTabMemento(AnalysisTabMemento memento)
# (public) void setFilterTabMemento(FilterTabMemento memento)

AnalysisTabMemento => std::unique_ptr<AnalysisTabMemento>
FilterTabMemento => std::unique_ptr<FilterTabMemento>

# (private) AnalysisTabMemento* analysisTab
# (private) FilterTabMemento* filterTab

AnalysisTabMemento* => std::unique_ptr<AnalysisTabMemento>
FilterTabMemento* => std::unique_ptr<FilterTabMemento>

\end{verbatim}
Unnoetiges Kopieren vermeiden.

\end{document}